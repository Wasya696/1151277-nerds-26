var link=document.querySelector(".button-address"),popup=document.querySelector(".modal-login"),close=popup.querySelector(".modal-close"),form=popup.querySelector("form"),userName=popup.querySelector("[name=name]"),email=popup.querySelector("[name=email]"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("userName")}catch(e){isStorageSupport=!1}link.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-window"),storage?(userName.value=storage,email.focus()):userName.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-window"),userName.classList.remove("error"),email.classList.remove("error")}),form.addEventListener("submit",function(e){userName.value?email.value?isStorageSupport&&localStorage.setItem("userName",userName.value):(e.preventDefault(),email.classList.add("error")):(e.preventDefault(),userName.classList.add("error"))}),userName.addEventListener("focus",function(){userName.classList.contains("error")&&userName.classList.remove("error")}),email.addEventListener("focus",function(){email.classList.contains("error")&&email.classList.remove("error")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("modal-window")&&popup.classList.remove("modal-window"))});